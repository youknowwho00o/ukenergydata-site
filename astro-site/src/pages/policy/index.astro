---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";

// ğŸ“… è·å–å¹¶å€’åºæ’åº
const policies = (await getCollection("policy")).sort(
  (a, b) => new Date(b.data.date) - new Date(a.data.date)
);

// ğŸ§¹ æ¸…é™¤æ ‡é¢˜é‡Œçš„æ—¥æœŸï¼ˆæ¯”å¦‚ â€œ2025-11-14â€ï¼‰
function cleanTitle(title) {
  return title.replace(/\s*[-â€“â€”]?\s*\d{4}-\d{2}-\d{2}$/, "");
}
---

<Layout title="UK Energy Policy Library">
  <section class="max-w-4xl mx-auto px-6 py-12">
    <h1 class="text-3xl font-bold text-blue-300 mb-4">UK Energy Policy Library</h1>
    <p class="text-gray-400 mb-10">
      Explore the latest UK government energy policies, incentives, and subsidy programs.
    </p>

    <ul class="space-y-8">
      {policies.map((item) => (
        <li class="border-b border-[#1E3A5F]/40 pb-5">
          <!-- âœ… æ¸…ç†æ‰æ ‡é¢˜ä¸­çš„æ—¥æœŸ -->
          <a
            href={`/policy/${item.slug}/`}
            class="text-blue-400 hover:text-blue-300 text-xl font-semibold leading-snug"
          >
            {cleanTitle(item.data.title)}
          </a>

          <p class="text-sm text-gray-500 italic mt-1">{item.data.date}</p>

          {item.data.description && (
            <p class="text-gray-300 text-sm mt-2">{item.data.description}</p>
          )}
        </li>
      ))}
    </ul>
  </section>
</Layout>
